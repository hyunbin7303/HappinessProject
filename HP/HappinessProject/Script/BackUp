--
-- PostgreSQL database cluster dump
--

-- Started on 2019-04-25 23:01:40

SET default_transaction_read_only = off;

SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;

--
-- Roles
--

CREATE ROLE postgres;
ALTER ROLE postgres WITH SUPERUSER INHERIT CREATEROLE CREATEDB LOGIN REPLICATION BYPASSRLS PASSWORD 'md5adb8f32b4b49dc0f1ac2d6643e6406d8';






--
-- Database creation
--

CREATE DATABASE "HPdb" WITH TEMPLATE = template0 OWNER = postgres;
REVOKE CONNECT,TEMPORARY ON DATABASE template1 FROM PUBLIC;
GRANT CONNECT ON DATABASE template1 TO PUBLIC;


\connect "HPdb"

SET default_transaction_read_only = off;

--
-- PostgreSQL database dump
--

-- Dumped from database version 10.3
-- Dumped by pg_dump version 10.3

-- Started on 2019-04-25 23:01:40

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 5 (class 2615 OID 16394)
-- Name: hpschema; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA hpschema;


ALTER SCHEMA hpschema OWNER TO postgres;

--
-- TOC entry 1 (class 3079 OID 12924)
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- TOC entry 2831 (class 0 OID 0)
-- Dependencies: 1
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


--
-- TOC entry 218 (class 1255 OID 16420)
-- Name: fnsomefunc(integer, text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.fnsomefunc(numtimes integer, msg text) RETURNS text
    LANGUAGE plpgsql IMMUTABLE SECURITY DEFINER COST 10
    AS $$
    DECLARE
    strresult text;
    BEGIN
    strresult := '';
    IF numtimes > 0 THEN
    FOR i IN 1 .. numtimes LOOP
    strresult := strresult || msg || E'\r\n';
    END LOOP;
    END IF;
    RETURN strresult;
    END;
    $$;


ALTER FUNCTION public.fnsomefunc(numtimes integer, msg text) OWNER TO postgres;

--
-- TOC entry 204 (class 1255 OID 16456)
-- Name: proc_displaytaskinfo(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.proc_displaytaskinfo() RETURNS TABLE(id integer, description character varying, user_id integer, tname character varying, startdate date, enddate date, score integer)
    LANGUAGE plpgsql
    AS $$
BEGIN
RETURN QUERY
	SELECT T.id, T.description,T.user_id, T."tName", TD.startdate, TD.enddate, TD.score
	FROM hpschema."Task" T
	INNER JOIN hpschema."TaskDetail" TD
	ON T.id = TD.tid;

END $$;


ALTER FUNCTION public.proc_displaytaskinfo() OWNER TO postgres;

--
-- TOC entry 209 (class 1255 OID 16412)
-- Name: proc_seetasks(text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.proc_seetasks(INOUT p1 text) RETURNS text
    LANGUAGE plpgsql
    AS $$
BEGIN
	SELECT id, T."tName", T.description, T.user_id, TD.startdate, TD.enddate, TD.score
	FROM hpschema."Task" T
	INNER JOIN hpschema."TaskDetail" TD
	ON T.id = TD.tid;
END;
$$;


ALTER FUNCTION public.proc_seetasks(INOUT p1 text) OWNER TO postgres;

--
-- TOC entry 203 (class 1255 OID 16411)
-- Name: procedure1(text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.procedure1(INOUT p1 text) RETURNS text
    LANGUAGE plpgsql
    AS $$
BEGIN
    RAISE NOTICE 'Procedure Parameter: %', p1 ;
END ;
$$;


ALTER FUNCTION public.procedure1(INOUT p1 text) OWNER TO postgres;

--
-- TOC entry 215 (class 1255 OID 16410)
-- Name: sum_n_product(integer, integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.sum_n_product(x integer, y integer, OUT sum integer, OUT prod integer) RETURNS record
    LANGUAGE plpgsql
    AS $$
BEGIN 
	sum := x + y;
	prod := x* y;
END;
$$;


ALTER FUNCTION public.sum_n_product(x integer, y integer, OUT sum integer, OUT prod integer) OWNER TO postgres;

--
-- TOC entry 217 (class 1255 OID 16445)
-- Name: testfunc(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.testfunc() RETURNS TABLE(id integer, description character varying, user_id integer)
    LANGUAGE plpgsql
    AS $$
BEGIN
RETURN QUERY
	SELECT T.id, T.description,T.user_id
	FROM hpschema."Task" T
	INNER JOIN hpschema."TaskDetail" TD
	ON T.id = TD.tid;

END $$;


ALTER FUNCTION public.testfunc() OWNER TO postgres;

--
-- TOC entry 210 (class 1255 OID 16443)
-- Name: testfunc(character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.testfunc(character varying) RETURNS TABLE(id integer, description character varying, user_id integer)
    LANGUAGE plpgsql
    AS $$
BEGIN
RETURN QUERY
	SELECT T.id, T.description,T.user_id
	FROM hpschema."Task" T
	INNER JOIN hpschema."TaskDetail" TD
	ON T.id = TD.tid
	WHERE T."tName" = 'Breakdance';
END $$;


ALTER FUNCTION public.testfunc(character varying) OWNER TO postgres;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- TOC entry 198 (class 1259 OID 16400)
-- Name: Task; Type: TABLE; Schema: hpschema; Owner: postgres
--

CREATE TABLE hpschema."Task" (
    id integer NOT NULL,
    "tName" character varying(50),
    description character varying(200),
    user_id integer
);


ALTER TABLE hpschema."Task" OWNER TO postgres;

--
-- TOC entry 199 (class 1259 OID 16405)
-- Name: TaskDetail; Type: TABLE; Schema: hpschema; Owner: postgres
--

CREATE TABLE hpschema."TaskDetail" (
    tid integer NOT NULL,
    startdate date,
    enddate date,
    score integer
);


ALTER TABLE hpschema."TaskDetail" OWNER TO postgres;

--
-- TOC entry 197 (class 1259 OID 16395)
-- Name: User; Type: TABLE; Schema: hpschema; Owner: postgres
--

CREATE TABLE hpschema."User" (
    id integer NOT NULL,
    "fName" character varying(30),
    "lName" character varying(30),
    description character varying(100)
);


ALTER TABLE hpschema."User" OWNER TO postgres;

--
-- TOC entry 201 (class 1259 OID 16415)
-- Name: accounts; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.accounts (
    id integer NOT NULL,
    name character varying(100) NOT NULL,
    balance numeric(15,2) NOT NULL
);


ALTER TABLE public.accounts OWNER TO postgres;

--
-- TOC entry 200 (class 1259 OID 16413)
-- Name: accounts_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.accounts ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.accounts_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 2820 (class 0 OID 16400)
-- Dependencies: 198
-- Data for Name: Task; Type: TABLE DATA; Schema: hpschema; Owner: postgres
--

COPY hpschema."Task" (id, "tName", description, user_id) FROM stdin;
1	Breakdance	Practicing everything	1
2	Programming	Practicing everything	1
3	TodoLIst	Practicing everything	1
\.


--
-- TOC entry 2821 (class 0 OID 16405)
-- Dependencies: 199
-- Data for Name: TaskDetail; Type: TABLE DATA; Schema: hpschema; Owner: postgres
--

COPY hpschema."TaskDetail" (tid, startdate, enddate, score) FROM stdin;
1	2019-04-25	2019-05-30	50
2	2016-04-25	2019-05-30	70
\.


--
-- TOC entry 2819 (class 0 OID 16395)
-- Dependencies: 197
-- Data for Name: User; Type: TABLE DATA; Schema: hpschema; Owner: postgres
--

COPY hpschema."User" (id, "fName", "lName", description) FROM stdin;
1	kevin	park	Main user
2	adam	sosnowski	main user friend
3	Julio	Ravis	HAHAHAHAH
\.


--
-- TOC entry 2823 (class 0 OID 16415)
-- Dependencies: 201
-- Data for Name: accounts; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.accounts (id, name, balance) FROM stdin;
1	Bob	10000.00
2	Alice	10000.00
\.


--
-- TOC entry 2832 (class 0 OID 0)
-- Dependencies: 200
-- Name: accounts_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.accounts_id_seq', 2, true);


--
-- TOC entry 2695 (class 2606 OID 16409)
-- Name: TaskDetail TaskDetail_pkey; Type: CONSTRAINT; Schema: hpschema; Owner: postgres
--

ALTER TABLE ONLY hpschema."TaskDetail"
    ADD CONSTRAINT "TaskDetail_pkey" PRIMARY KEY (tid);


--
-- TOC entry 2693 (class 2606 OID 16404)
-- Name: Task Task_pkey; Type: CONSTRAINT; Schema: hpschema; Owner: postgres
--

ALTER TABLE ONLY hpschema."Task"
    ADD CONSTRAINT "Task_pkey" PRIMARY KEY (id);


--
-- TOC entry 2691 (class 2606 OID 16399)
-- Name: User User_pkey; Type: CONSTRAINT; Schema: hpschema; Owner: postgres
--

ALTER TABLE ONLY hpschema."User"
    ADD CONSTRAINT "User_pkey" PRIMARY KEY (id);


--
-- TOC entry 2697 (class 2606 OID 16419)
-- Name: accounts accounts_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.accounts
    ADD CONSTRAINT accounts_pkey PRIMARY KEY (id);


-- Completed on 2019-04-25 23:01:41

--
-- PostgreSQL database dump complete
--

\connect postgres

SET default_transaction_read_only = off;

--
-- PostgreSQL database dump
--

-- Dumped from database version 10.3
-- Dumped by pg_dump version 10.3

-- Started on 2019-04-25 23:01:41

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 2792 (class 0 OID 0)
-- Dependencies: 2791
-- Name: DATABASE postgres; Type: COMMENT; Schema: -; Owner: postgres
--

COMMENT ON DATABASE postgres IS 'default administrative connection database';


--
-- TOC entry 2 (class 3079 OID 12924)
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- TOC entry 2794 (class 0 OID 0)
-- Dependencies: 2
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


--
-- TOC entry 1 (class 3079 OID 16384)
-- Name: adminpack; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS adminpack WITH SCHEMA pg_catalog;


--
-- TOC entry 2795 (class 0 OID 0)
-- Dependencies: 1
-- Name: EXTENSION adminpack; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION adminpack IS 'administrative functions for PostgreSQL';


-- Completed on 2019-04-25 23:01:41

--
-- PostgreSQL database dump complete
--

\connect template1

SET default_transaction_read_only = off;

--
-- PostgreSQL database dump
--

-- Dumped from database version 10.3
-- Dumped by pg_dump version 10.3

-- Started on 2019-04-25 23:01:41

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 2791 (class 0 OID 0)
-- Dependencies: 2790
-- Name: DATABASE template1; Type: COMMENT; Schema: -; Owner: postgres
--

COMMENT ON DATABASE template1 IS 'default template for new databases';


--
-- TOC entry 1 (class 3079 OID 12924)
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- TOC entry 2793 (class 0 OID 0)
-- Dependencies: 1
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


-- Completed on 2019-04-25 23:01:41

--
-- PostgreSQL database dump complete
--

-- Completed on 2019-04-25 23:01:41

--
-- PostgreSQL database cluster dump complete
--

